@namespace TobyBlazor.Components

@using TobyBlazor.Data
@using TobyBlazor.Models

@inject IJSRuntime jsRuntime

<input type="text" class="form-control" id="commandInput" placeholder="Search..."
       @onchange=@(newValue => CommandChanged(newValue.Value.ToString()))
       onchange-prevent-default />

@code {    
    private readonly IVideoRepository videos = new VideoRepository();

    [Parameter]
    public EventCallback<List<Video>> OnSearch { get; set; }     

    private async void CommandChanged(string term)
    {
        await OnSearch.InvokeAsync(await videos.Search(term));
    }
}
